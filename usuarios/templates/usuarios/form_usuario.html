{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block title %}{{ titulo }} - Gesti贸n de Usuarios{% endblock %}

{% block content %}
<div class="login-wrapper d-flex justify-content-center align-items-center">
    <div class="login-card shadow">

        <!--  Panel izquierdo con info de roles -->
        <div class="login-left text-white d-flex flex-column justify-content-center">
            <h2 class="fw-bold">Gesti贸n de Usuarios</h2>
            <p class="mt-2">Creaci贸n de Cuenta Base</p>
            <div class="mt-3">
                <h6 class="fw-semibold text-white-50">Roles disponibles:</h6>
                <ul class="login-roles mt-2">
                    <li><strong>Recepcionista:</strong> Registro inicial de ingreso de madres</li>
                    <li><strong>M茅dico:</strong> Confirma altas cl铆nicas</li>
                    <li><strong>Matrona:</strong> Registra procesos de parto</li>
                    <li><strong>Administrativo:</strong> Confirma altas administrativas</li>
                    <li><strong>Supervisor:</strong> Auditor铆a interna</li>
                    <li><strong>Encargado TI:</strong> Gesti贸n de usuarios y seguridad</li>
                </ul>
            </div>
        </div>

        <!--  Panel derecho con el formulario -->
        <div class="login-right">
            <h4 class="fw-bold mb-4 text-center">{{ titulo }}</h4>

            <form method="post">
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label">{{ form.nombre.label }}</label>
                    {{ form.nombre }}
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">{{ form.rut.label }}</label>
                        {{ form.rut }}
                        <small class="text-muted small">Identificador 煤nico del sistema</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">{{ form.rol.label }}</label>
                        {{ form.rol }}
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">{{ form.email.label }}</label>
                    {{ form.email }}
                </div>

                <div class="mb-3">
                    <label class="form-label">{{ form.telefono.label }}</label>
                    {{ form.telefono }}
                </div>

                {% if form.non_field_errors %}
                <div class="alert alert-danger small">
                    {{ form.non_field_errors }}
                </div>
                {% endif %}

                {% if es_edicion %}
                <div class="mb-3 mt-2">
                    <label class="form-label fw-semibold">Estado de la Cuenta</label>

                    <div class="form-check form-switch">
                        {{ form.is_active }}
                        <label class="form-check-label ms-2" for="id_is_active">
                            {% if form.instance.is_active %}
                                Activa
                            {% else %}
                                Inactiva
                            {% endif %}
                        </label>
                    </div>

                    <small class="text-muted">Si desactivas la cuenta, el usuario no podr谩 iniciar sesi贸n.</small>
                </div>
                {% endif %}

                <button type="submit" class="btn btn-register w-100 fw-semibold mt-2">
                    <i class="bi bi-check-circle"></i> {{ btn_texto }}
                </button>
            </form>

            <p class="text-center small mt-4">
                <a href="{% url 'usuarios:gestion_usuarios' %}" class="fw-semibold">
                    <i class="bi bi-arrow-left"></i> Volver a la gesti贸n
                </a>
            </p>
        </div>
    </div>
</div>
{% endblock %}
